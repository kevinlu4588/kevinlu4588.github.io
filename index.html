<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kevin Lu — Academic Website</title>
  <meta name="description" content="Research, publications, talks, teaching, and projects." />
  <meta property="og:title" content="Kevin Lu — Academic Website" />
  <meta property="og:description" content="Research, publications, talks, teaching, and projects." />
  <meta property="og:type" content="website" />
  <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
  <style>
    :root {
      --bg: #f8f9fc;
      --fg: #1a2332;
      --muted: #64748b;
      --card: #ffffff;
      --accent: #2563eb;
      --link: #1d4ed8;
      --maxw: 1024px;
      --radius: 16px;
    }
    @media (prefers-color-scheme: dark) {
      :root { --bg:#0f172a; --fg:#f1f5f9; --muted:#94a3b8; --card:#1e293b; --accent:#3b82f6; --link:#60a5fa; }
    }
    html { color-scheme: light dark; }
    body { margin:0; font: 16px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:var(--bg); color:var(--fg); }
    a { color: var(--link); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .wrap { max-width: var(--maxw); margin: 0 auto; padding: 24px; }
    header { position: sticky; top: 0; backdrop-filter: blur(6px); background: color-mix(in oklab, var(--bg) 86%, transparent); border-bottom: 1px solid color-mix(in oklab, var(--fg) 10%, transparent); }
    header .wrap { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
    nav a { margin-left: 16px; font-weight: 600; }
    .hero { display:grid; grid-template-columns: 0.8fr 1.2fr 1fr; gap: 24px; padding-top: 28px; }
    .card { background: var(--card); border: 1px solid color-mix(in oklab, var(--fg) 12%, transparent); border-radius: var(--radius); padding: 20px; }
    h1 { font-size: clamp(22px, 3.2vw, 32px); line-height: 1.25; margin: 12px 0 8px; }
    h2 { font-size: clamp(20px, 2.6vw, 28px); margin: 28px 0 8px; }
    h3 { font-size: 18px; margin: 18px 0 6px; }
    .muted { color: var(--muted); }
    .grid { display:grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
    .grid-2 { display:grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
    .kicker { letter-spacing: .12em; text-transform: uppercase; font-size: 12px; color: var(--muted); }
    .tag { display:inline-block; padding: 2px 8px; border-radius: 999px; background: color-mix(in oklab, var(--accent) 20%, transparent); border:1px solid color-mix(in oklab, var(--accent) 35%, transparent); font-size:12px; margin-right: 6px; }
    .list { list-style: none; padding: 0; margin: 0; }
    .list li { padding: 12px 0; border-bottom: 1px solid color-mix(in oklab, var(--fg) 10%, transparent); }
    .row { display:flex; align-items:center; justify-content: space-between; gap: 12px; flex-wrap: wrap; }
    .btn { display:inline-block; padding:10px 14px; border-radius: 12px; background: var(--accent); color: white; font-weight: 700; }
    .btn.ghost { background: transparent; border: 1px solid color-mix(in oklab, var(--fg) 18%, transparent); color: var(--fg); }
    footer { margin: 40px 0 24px; color: var(--muted); }
    .profile-photo { width: 220px; height: 220px; border-radius: 50%; display:block; margin: 0 auto 16px; object-fit: cover; }
    .profile-section { display: flex; flex-direction: column; align-items: center; }
    .icon-links { display: flex; gap: 12px; margin-top: 16px; }
    .icon-links a { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 8px; background: white; color: var(--fg); font-weight: 700; text-decoration: none; padding: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .icon-links a.ghost { background: white; border: 1px solid color-mix(in oklab, var(--fg) 18%, transparent); color: var(--fg); }
    .icon-links a:hover { opacity: 0.8; }
    .icon-links a img { width: 100%; height: 100%; object-fit: contain; }

    @media (max-width: 900px) {
      .hero { grid-template-columns: 1fr; }
      .grid, .grid-2 { grid-template-columns: 1fr; }
      nav a { margin-left: 10px; }
    }
    .visualization-container { width: 100%; height: 400px; background: var(--card); border-radius: var(--radius); position: relative; }
    .controls { margin-top: 12px; }
    .progress-bar { width: 100%; height: 8px; background: color-mix(in oklab, var(--fg) 10%, transparent); border-radius: 4px; cursor: pointer; position: relative; }
    .progress-fill { height: 100%; background: var(--accent); border-radius: 4px; transition: width 0.1s; }
    .control-buttons { display: flex; gap: 8px; margin-top: 8px; align-items: center; }
    .control-btn { padding: 6px 12px; border-radius: 8px; background: var(--accent); color: white; border: none; cursor: pointer; font-weight: 600; font-size: 14px; }
    .control-btn:hover { opacity: 0.8; }
    .frame-label { color: var(--muted); font-size: 14px; margin-left: auto; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div style="font-weight:800">Kevin&nbsp;Lu</div>
      <nav>
        <a href="#Publications & Presentations">Publications</a>
        <a href="quotes.html">Quotes</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="profile-section">
        <img src="PFP.png" alt="Kevin Lu" class="profile-photo" />
        <h1 style="font-size: clamp(32px, 5vw, 48px); text-align: center; margin: 0;">Kevin Lu</h1>
        <div class="icon-links">
          <a href="mailto:lu.kev@northeastern.edu" title="Contact"><img src="icons/email.svg" alt="Email"></a>
          <a href="https://github.com/kevinlu4588" target="_blank" rel="noopener" title="GitHub" class="ghost"><img src="icons/github.svg" alt="GitHub"></a>
          <a href="https://www.linkedin.com/in/kevin-lu-4588-/" target="_blank" rel="noopener" title="LinkedIn" class="ghost"><img src="icons/linkedin.svg" alt="LinkedIn"></a>
        </div>
      </div>
      <div class="card">
        <h2 style="margin-top: 8px;">Concept Erasure & Steering Protein Design</h2>
        <p class="muted">I work on mechanistic interpretability of text to image diffusion models & protein language models. Currently an undergraduate researcher in the <a href="https://baulab.info/" target="_blank" rel="noopener">Bau Lab</a> and a co-op at Takeda Pharmaceuticals training SAEs for antibody protein design! I'm interested in CS PhD programs focused on accelerating and interpreting drug discovery pipelines.</p>
      </div>
      <div class="card">
        <div class="kicker">Protein Folding (ESM Folding Trunk Logit Lens)</div>
        <div class="controls">
          <div class="progress-bar" id="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <div class="control-buttons">
            <button class="control-btn" id="play-btn">Play</button>
            <button class="control-btn" id="reset-btn">Reset</button>
            <span class="frame-label" id="frame-label">Frame 94/191</span>
          </div>
        </div>
        <div id="protein-viewer" class="visualization-container"></div>
      </div>
    </section>

    <section style="margin-top: 16px;">
      <div class="card">
        <div class="kicker">News</div>
        <ul class="list" id="news">
          <li><strong>Sep 2025</strong> — Our paper <em>When are concepts erased from diffusion models?</em> accepted to <a href="https://neurips.cc/Conferences/2025/Dates" target="_blank" rel="noopener"><strong style="color: var(--accent);">NeurIPS</strong></a> Main Track!</li>
          <li><strong>Aug 2025</strong> — Served as a reviewer for <a href="https://neurips.cc/Conferences/2025/Dates" target="_blank" rel="noopener"><strong style="color: var(--accent);">NeurIPS</strong></a> <a href="https://mechinterpworkshop.com/" target="_blank" rel="noopener">Mechanistic Interpretability Workshop</a>.</li>
          <li><strong>Aug 2025</strong> — Presented <em>To Bind or Not to Bind: A Layer-Wise Dissection of Binding Information in ESM</em> at New England Mech Interp (<a href="https://nemiconf.github.io/summer25/" target="_blank" rel="noopener"><strong style="color: var(--accent);">NEMI</strong></a>) Workshop.</li>
          <li><strong>Jul 2025</strong> — Started co-op at Takeda Pharmaceuticals: focusing on PLM interpretability for antibody protein design.</li>
          <li><strong>Jun 2025</strong> — Presented <em>Where do concepts go in diffusion models?</em> <a href="https://generative-vision.github.io/workshop-CVPR-25/" target="_blank" rel="noopener"><strong style="color: var(--accent);">CVPR</strong> Generative Models for Computer Vision Workshop</a> and Visual Concepts Workshop!</li>
        </ul>
      </div>
    </section>

    <section id="Publications & Presentations" style="margin-top: 28px;">
      <h2>Publications & Presentations</h2>
      <div id="pubs" class="card" style="margin-top: 12px"></div>
      <div class="muted" style="margin-top:8px">Publications are loaded from <code>publications.json</code> (or the inline fallback below). Replace with your own.</div>

      <script id="pubs-fallback" type="application/json">{
        "entries": [
          {
            "title": "When Are Concepts Erased From Diffusion Models?",
            "authors": ["Kevin Lu", "Nicky Kriplani", "Rohit Gandikota", "Minh Pham", "David Bau", "Chinmay Hegde", "Niv Cohen"],
            "venue": "<a href='https://neurips.cc/Conferences/2025/Dates' target='_blank' rel='noopener'><strong style='color: var(--accent);'>NeurIPS</strong></a> 2025 (Poster)",
            "year": 2025,
            "paper": "#",
            "code": "https://github.com/kevinlu4588/DiffusionConceptErasure",
            "arxiv": "https://arxiv.org/abs/2505.17013",
            "thumbnail": "concept_erasure_thumbnail.png",
            "abstract": "We begin by proposing two conceptual models for the erasure mechanism in diffusion models: (i) reducing the likelihood of generating the target concept, and (ii) interfering with the model's internal guidance mechanisms. To thoroughly assess whether a concept has been truly erased from the model, we introduce a suite of independent evaluations.",
            "tags": ["diffusion", "interpretability", "unlearning"]
          },
          {
            "title": "To Bind or Not to Bind: Layer-wise Probing of ESM",
            "authors": ["Kevin Lu"],
            "venue": "<a href='https://nemiconf.github.io/summer25/' target='_blank' rel='noopener'><strong style='color: var(--accent);'>NEMI</strong></a> Workshop 2025",
            "year": 2025,
            "paper": "#",
            "code": "https://github.com/kevinlu4588/ESMProbing",
            "thumbnail": "esm_probing_thumbnail.png",
            "abstract": "We investigate this question through the case study of TCR CDR3b–peptide binding, probing the Evolutionary Scale Model (ESM) with a combination of difference-of-means analyses, classifier training on intermediate embeddings, and causal ablation of attention heads. Our findings suggest that intermediate representations may be more informative than final embeddings for binding prediction.",
            "tags": ["proteins", "ESM", "probing"]
          }
        ]
      }</script>
    </section>

    <footer>
      <div class="row">
        <div>© <span id="year"></span> Kevin Lu</div>
        <div class="muted">Built with plain HTML/CSS/JS</div>
      </div>
    </footer>
  </main>

  <script>
    const $$ = (sel, el=document) => el.querySelector(sel);
    const pubsEl = $$("#pubs");

    async function loadPublications() {
      try {
        const res = await fetch('publications.json', { cache: 'no-store' });
        if (!res.ok) throw new Error('No external publications.json');
        const data = await res.json();
        return data.entries ?? [];
      } catch (e) {
        const inline = $$("#pubs-fallback").textContent;
        try { return JSON.parse(inline).entries ?? []; } catch { return []; }
      }
    }

    function renderPublications(items) {
      const groups = new Map();
      for (const p of items) {
        const y = p.year || '—';
        if (!groups.has(y)) groups.set(y, []);
        groups.get(y).push(p);
      }

      const out = [];
      for (const [year, arr] of groups) {
        out.push(`<div class="kicker" style="margin-top:6px">${year}</div>`);
        for (const p of arr) {
          const authors = (p.authors||[]).join(', ');
          const links = [ ['paper', p.paper], ['arxiv', p.arxiv], ['code', p.code] ]
            .filter(([,href]) => href && href !== '#')
            .map(([label, href]) => `<a href="${href}" target="_blank" rel="noopener">${label}</a>`)
            .join(' · ');
          const tags = (p.tags||[]).map(t=>`<span class="tag">${t}</span>`).join(' ');

          const thumbnail = p.thumbnail ? `
            <a href="${p.arxiv || p.paper || '#'}" target="_blank" rel="noopener">
              <img src="${p.thumbnail}" alt="${p.title}" style="width:100%;max-width:200px;border-radius:8px;margin-bottom:8px;cursor:pointer;" />
            </a>
          ` : '';

          const abstract = p.abstract ? `<div class="muted" style="margin-top:8px;font-size:14px;line-height:1.5;">${p.abstract}</div>` : '';

          out.push(`
            <div style="padding:14px 0;border-bottom:1px solid color-mix(in oklab, var(--fg) 10%, transparent);display:flex;gap:16px;">
              ${thumbnail ? `<div style="flex-shrink:0;">${thumbnail}</div>` : ''}
              <div style="flex:1;">
                <div style="font-weight:700">${p.title}</div>
                <div class="muted">${authors}${p.venue?` — ${p.venue}`:''}</div>
                ${abstract}
                <div class="row" style="margin-top:6px">
                  <div>${tags}</div>
                  <div>${links}</div>
                </div>
              </div>
            </div>
          `);
        }
      }
      pubsEl.innerHTML = out.join('') || '<div class="muted">No publications found.</div>';
    }

    (async () => {
      const items = await loadPublications();
      renderPublications(items);
      $$("#year").textContent = new Date().getFullYear();
    })();

    // Protein folding animation
    let viewer = null;
    let currentFrame = 94;
    const startFrame = 94;
    const endFrame = 191;
    const totalFrames = 98;
    const trailLength = 5; // Number of previous frames to show
    const frameCache = {}; // Cache loaded PDB data
    let animationInterval = null;
    let isPlaying = false;

    function initProteinViewer() {
      const element = $$("#protein-viewer");
      const bgColor = getComputedStyle(document.documentElement).getPropertyValue('--card').trim();
      const config = { backgroundColor: bgColor || '#ffffff' };
      viewer = $3Dmol.createViewer(element, config);
      viewer.resize();

      // Preload all frames
      const promises = [];
      for (let i = startFrame; i <= endFrame; i++) {
        const frameStr = i < 100 ? String(i).padStart(2, '0') : String(i);
        promises.push(
          fetch(`pdb_files_aligned/fold_block_${frameStr}.pdb`)
            .then(res => res.text())
            .then(data => { frameCache[i] = data; })
        );
      }

      Promise.all(promises).then(() => {
        loadFrameWithTrail(currentFrame);
        viewer.zoomTo(); // Zoom once at the start
        viewer.render();
        updateProgress();

        // Set up controls
        setupControls();
      });
    }

    function setupControls() {
      const playBtn = $$("#play-btn");
      const resetBtn = $$("#reset-btn");
      const progressBar = $$("#progress-bar");

      playBtn.addEventListener('click', () => {
        if (isPlaying) {
          pauseAnimation();
        } else {
          playAnimation();
        }
      });

      resetBtn.addEventListener('click', () => {
        pauseAnimation();
        currentFrame = startFrame;
        loadFrameWithTrail(currentFrame);
        updateProgress();
      });

      progressBar.addEventListener('click', (e) => {
        const rect = progressBar.getBoundingClientRect();
        const percent = (e.clientX - rect.left) / rect.width;
        currentFrame = Math.round(startFrame + percent * (endFrame - startFrame));
        loadFrameWithTrail(currentFrame);
        updateProgress();
      });
    }

    function playAnimation() {
      isPlaying = true;
      $$("#play-btn").textContent = "Pause";

      animationInterval = setInterval(() => {
        currentFrame++;
        if (currentFrame > endFrame) {
          pauseAnimation();
          return;
        }
        loadFrameWithTrail(currentFrame);
        updateProgress();
      }, 150);
    }

    function pauseAnimation() {
      isPlaying = false;
      $$("#play-btn").textContent = "Play";
      if (animationInterval) {
        clearInterval(animationInterval);
        animationInterval = null;
      }
    }

    function updateProgress() {
      const progress = ((currentFrame - startFrame) / (endFrame - startFrame)) * 100;
      $$("#progress-fill").style.width = progress + '%';
      $$("#frame-label").textContent = `Frame ${currentFrame}/${endFrame}`;
    }

    function loadFrameWithTrail(frameNum) {
      viewer.clear();

      // Add previous frames with decreasing opacity
      for (let i = trailLength - 1; i >= 0; i--) {
        let trailFrame = frameNum - i;
        if (trailFrame < 162) trailFrame += 30; // Wrap around

        const opacity = i === 0 ? 1.0 : 0.3 - (i * 0.05); // Fade older frames
        const data = frameCache[trailFrame];

        if (data) {
          const model = viewer.addModel(data, "pdb");
          viewer.setStyle({model: model}, {
            cartoon: {
              color: i === 0 ? 'spectrum' : 'gray',
              opacity: opacity
            }
          });
        }
      }

      viewer.render();
    }

    // Initialize viewer when page loads
    if ($$("#protein-viewer")) {
      initProteinViewer();
    }
  </script>
</body>
</html>
